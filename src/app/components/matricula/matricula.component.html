<header class="container-fluid d-flex align-items-center mb-2 p-2">
    <div class="ms-4">
        <img [src]="globalService.logoUrl" alt="logo" class="logo img-fluid">
    </div>
    <div class="ms-auto me-4">
        <button class="btn-voltar btn" [routerLink]="['/']">Voltar</button>
    </div>
</header>

<h2 class="text-center mt-2">Escolha um plano e treine conosco:</h2>

<div class="d-flex justify-content-center mx-2 mx-md-0">
    <form [formGroup]="matriculaForm" class="formulario-container text-center py-3 px-4">
        <div class="row py-4 mx-3">
            <div class="mb-3 col-md-6">
                <label for="nome" class="form-label">Nome Completo:</label>
                <input type="text" class="form-control" id="nome" formControlName="nome">
                @if (matriculaForm.controls['nome'].touched && matriculaForm.controls['nome'].errors?.['required']) {
                <div class="alert alert-warning d-flex justify-content-center mt-2">
                    <strong>Nome é obrigatório!</strong>
                </div>
                } @else if (matriculaForm.controls['nome'].touched &&
                matriculaForm.controls['nome'].errors?.['minlength']) {
                <div class="alert alert-warning d-flex justify-content-center mt-2">
                    <strong>Nome completo deve conter pelo menos 5 caracteres.</strong>
                </div>
                }
            </div>
            <div class="mb-3 col-md-6">
                <label for="nascimento" class="form-label">Data de Nascimento:</label>
                <input type="date" class="form-control" id="nascimento" formControlName="nascimento">
                @if (matriculaForm.controls['nascimento'].touched &&
                matriculaForm.controls['nascimento'].errors?.['required']) {
                <div class="alert alert-warning d-flex justify-content-center mt-2">
                    <strong>Data de nascimento é obrigatória!</strong>
                </div>
                }
            </div>
            <div class="mb-3 col-md-6">
                <label for="genero" class="form-label">Gênero:</label>
                <select class="form-control" id="genero" formControlName="genero">
                    <option value="" disabled>Escolha um gênero</option>
                    <option value="masculino">Masculino</option>
                    <option value="feminino">Feminino</option>
                </select>
                @if (matriculaForm.controls['genero'].touched && matriculaForm.controls['genero'].errors?.['required'])
                {
                <div class="alert alert-warning d-flex justify-content-center mt-2">
                    <strong>Gênero é obrigatório!</strong>
                </div>
                }
            </div>
            <div class="mb-3 col-md-6">
                <label for="email" class="form-label">Email:</label>
                <input type="email" class="form-control" id="email" formControlName="email">
                @if (matriculaForm.controls['email'].touched && matriculaForm.controls['email'].errors?.['required']) {
                <div class="alert alert-warning d-flex justify-content-center mt-2">
                    <strong>Email é obrigatório!</strong>
                </div>
                } @else if (matriculaForm.controls['email'].touched &&
                matriculaForm.controls['email'].errors?.['email']) {
                <div class="alert alert-warning d-flex justify-content-center mt-2">
                    <strong>Email inválido!</strong>
                </div>
                }
            </div>
            <div class="mb-3 col-md-6">
                <label for="telefone" class="form-label">Telefone:</label>
                <input type="number" class="form-control" id="telefone" formControlName="telefone"
                    placeholder="10 ou 11 dígitos.">
                @if (matriculaForm.controls['telefone'].touched &&
                matriculaForm.controls['telefone'].errors?.['required']) {
                <div class="alert alert-warning d-flex justify-content-center mt-2">
                    <strong>Telefone é obrigatório!</strong>
                </div>
                } @else if (matriculaForm.controls['telefone'].touched &&
                matriculaForm.controls['telefone'].errors?.['pattern']) {
                <div class="alert alert-warning d-flex justify-content-center mt-2">
                    <strong>Telefone deve ter 10 ou 11 dígitos!</strong>
                </div>
                }
            </div>
            <div class="mb-3 col-md-6">
                <label for="peso" class="form-label">Peso(Kg):</label>
                <input type="number" class="form-control" id="peso" formControlName="peso">
                @if (matriculaForm.controls['peso'].touched && matriculaForm.controls['peso'].errors?.['required']) {
                <div class="alert alert-warning d-flex justify-content-center mt-2">
                    <strong>Peso é obrigatório!</strong>
                </div>
                } @else if (matriculaForm.controls['peso'].touched && matriculaForm.controls['peso'].errors?.['min']) {
                <div class="alert alert-warning d-flex justify-content-center mt-2">
                    <strong>Peso inválido!</strong>
                </div>
                }
            </div>
            <div class="mb-1 col-md-6">
                <label for="altura" class="form-label">Altura(m):</label>
                <input type="number" class="form-control" id="altura" formControlName="altura">
                @if (matriculaForm.controls['altura'].touched && matriculaForm.controls['altura'].errors?.['required'])
                {
                <div class="alert alert-warning d-flex justify-content-center mt-2">
                    <strong>Altura é obrigatória!</strong>
                </div>
                } @else if (matriculaForm.controls['altura'].touched &&
                matriculaForm.controls['altura'].errors?.['min']) {
                <div class="alert alert-warning d-flex justify-content-center mt-2">
                    <strong>Altura inválida!</strong>
                </div>
                }
            </div>
            <div class="mb-1 col-md-6">
                <label for="plano" class="form-label">Plano:</label>
                <select class="form-control" id="plano" formControlName="plano">
                    <option value="" disabled>Escolha um plano</option>
                    <option value="teste">Plano de Teste</option>
                    <option value="light">Plano Light</option>
                    <option value="fit">Plano Fit</option>
                    <option value="fitPlus">Plano Fit Plus</option>
                </select>
                @if (matriculaForm.controls['plano'].touched && matriculaForm.controls['plano'].errors?.['required']) {
                <div class="alert alert-warning d-flex justify-content-center mt-2">
                    <strong>Plano é obrigatório!</strong>
                </div>
                }
            </div>
        </div>
        <div class="d-flex justify-content-end">
            <button class="botao-formulario btn px-3 py-2 me-3" type="button"
                (click)="limparFormulario()">Apagar</button>
            <button class="botao-formulario btn px-3 py-2" type="button" [disabled]="!matriculaForm.valid"
                (click)="enviarFormulario()">Confirmar</button>
        </div>
    </form>
</div>

<div class="row mt-4 text-center d-flex justify-content-center mx-2">
    <div class="col-md-3 mb-4" *ngFor="let plano of globalService.planos">
        <div class="card h-100">
            <img [src]="plano.imagem" class="card-img-top" alt="Imagem do plano">
            <div class="card-body">
                <h5 class="card-title">{{ plano.tipo }}</h5>
                <p *ngFor="let item of plano.vantagens">{{ item }}</p>
                <p class="preco text-success fw-bold mt-3">R$ {{ plano.preco }},00</p>
            </div>
        </div>
    </div>
</div>

<app-footer></app-footer>